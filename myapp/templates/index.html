{% extends 'base.html' %}
{% load static %}

{% block title %}Freshora - Your Online Store{% endblock %}

{% block content %}

<section class="hero">
    <div class="hero-content">
        <h1>Live Better with Freshora</h1>
        <p>Discover a supershop designed to make your life simpler, healthier, and more joyful</p>
        <a href="#" class="cta-button">Shop Now</a>
    </div>
</section>

<main>
    <!-- Category Section  -->
    <section class="categories">
        <h2>Categories</h2>
        <div class="category-cards">
            <div class="scroller-wrapper">
                <div class="category-cards scroller">
                    <!-- Loop through the categories A SECOND TIME (for the seamless loop) -->
                    {% for category in categories %}
                        <a href="#" class="card-link" aria-hidden="true"> <!-- aria-hidden for accessibility -->
                            <div class="card">
                                {% if category.image %}
                                    <img src="{{ category.image.url }}" alt="{{ category.name }} logo" class="card-image">
                                {% endif %}
                                <h3 class="card-title">{{ category.name }}</h3>
                            </div>
                        </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>


    <!-- Featured Product Section -->

    <section class="featured-products">
        <div class="feat">
            <h2>Featured Products</h2>
        </div>

        <div class="all-product-grid">
            {% for product in products %}
                <div class="all-product-card">

                    {% if product.is_on_sale %}
                        <span class="all-product-badge all-product-sale-badge">
                            Sale
                        </span>
                    {% endif %}

                    <img 
                        src="{{ product.image.url }}" 
                        alt="{{ product.name }}" 
                        class="all-product-image"
                    >

                    <div class="all-product-card-content">
                        <p class="all-product-category">
                            {{ product.category.name }}
                        </p>

                        <h3 class="all-product-name">
                            {{ product.name }}
                        </h3>

                        <p class="all-product-price">
                            ${{ product.price }}
                        </p>

                        <button class="add-to-cart-btn">
                            Add to Cart
                        </button>
                    </div>

                </div>
            {% empty %}
                <p>No featured products available.</p>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if products.paginator.num_pages > 1 %}
            <div class="pagination">

                {% if products.has_previous %}
                    <a href="?page={{ products.previous_page_number }}" class="page-btn">
                        Previous
                    </a>
                {% endif %}

                {% for num in products.paginator.page_range %}
                    {% if num == products.number %}
                        <span class="page-number active">{{ num }}</span>
                    {% else %}
                        <a href="?page={{ num }}" class="page-number">{{ num }}</a>
                    {% endif %}
                {% endfor %}

                {% if products.has_next %}
                    <a href="?page={{ products.next_page_number }}" class="page-btn">
                        Next
                    </a>
                {% endif %}

            </div>
        {% endif %}
    </section>


</main>

{% endblock %}